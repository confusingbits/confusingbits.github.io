---
type: blog
author: Corey Thompson
title: >
  Building an Inexpensive Home Storage Server
description: >
  
image: images/video-Building an Inexpensive Home Storage Server.jpg
published: "2023-06-15"
video: https://www.youtube.com/watch?v=k2UHmVScSZs
---
### This transcript was automatically generated by YouTube, so there may (will) be some (many) errors.

all right let&#39;s try this again it&#39;s like

the third take my phone like just

stopped first time I rambled too much

the second time my phone just stopped

recording so anyway

yeah hey guys welcome back

whatever confusing bits I think I want

to talk about today is some things

I&#39;ve learned about setting up a a

home storage server some of the

things that I&#39;ve learned some where I

came from and the thing that I have

arrived at lately

um so

I have of course I&#39;m doing the video

video lately I also have like a

couple of different cloud storage

providers I mean I&#39;m trying to move all

of my data locally and and reducing my

Reliance on cloud storage because I find

like I&#39;ve I&#39;ve got things that I should

be able to like transfer from one

machine to another but actually having

to go up to the cloud and then back down

it&#39;s it&#39;s nonsense so I I&#39;m trying to to

get more ownership of my data and

everything and so I for a long time I I

had my gaming laptop I had my work

machine but I also have a really old

machine that used to be my main machine

for like 13 years or something like that

it was an Old Dell that I have just

added to and replace parts for you know

for 13 years it&#39;s the thing I learned

to program on everything it&#39;s

I I&#39;ve had it forever and I have just

for a long time I was just running

Ubuntu

um these last couple of years in fact it

was just I just

this machine just started being a home a

Home Server just like before covet

because that&#39;s when I built right before

covid was when I built my new gaming

machine which was my my new main machine

at the time

was just before coven right just before

all of the hardware exploded in in price

I got in really quickly but but it&#39;s

like eight hundred dollars is fantastic

but

um

anyway so I had this all machine rant

and I was just running Ubuntu I had a a

simple file share that I had set up with

a ZFS and a couple well and you

know some sort of one terabyte drives

that I had collected over the years from

various desktop machines it was just one

of these These Old Dell machines right I

mean it&#39;s nothing nothing really to

these things and this is just a spare

parts machine this isn&#39;t this is like

was my parents machine and it it gave up

the ghost or whatever so it&#39;s just fit

for parts for biology the the the

old Dell the 13 year old Dell is

actually sitting right here in pieces

and most of the pieces have been

taken out and there it is right there

that is a a a first generation I5 is a

Core i5 650 right it&#39;s it&#39;s two cores

four four threads actually has hyper

threading in it so it shows four threads

Hardware threads and yeah first

generation iPhone so yeah it&#39;s really

old and I&#39;ve had it forever and I&#39;m able

to get away with it because that&#39;s if

you buy like a Nast solution off this

off the the Shelf like network

attached Source or home storage or

whatever server it&#39;s going to be

maybe even not that powerful right

because CPUs haven&#39;t really gotten more

power they&#39;ve gotten more cores they got

a couple some more cash on them or

something like that but like the per

thread performance is not very much

different and if you&#39;re not running a

whole bunch of stuff you&#39;re just running

a file store server you don&#39;t really

need a big beefy CPU in my mind anyway

this works out fine right

so yeah that&#39;s that machine here and

I needed the the real kicker

for me upgrading was I just ran out of

space in the this tiny little box here I

had like drives like hanging around like

literally hanging and dangling like

inside of the case or whatever you

didn&#39;t want to move it because you

jostled the drives or whatever so

I run out of space and and so I

needed a bigger job and one of the

things that I came across really quickly

I was this this fractal design case now

this is kind of an Enthusiast kind of

Premium case I&#39;m I&#39;m I&#39;m using a

fractal for now I&#39;m using a Corsair on

my game machine so but the fractal is

like they&#39;re they&#39;re not the LG Focus

they&#39;re nice cases but this is an older

model of theirs they&#39;re still making it

it&#39;s called The fractal

fractal Define R5 and what&#39;s special

about it is it includes all of these

Drive Bays

you don&#39;t have to buy the drive bay the

extra so some of these

this Enthusiast case you can you can buy

the case and it has space for more Drive

Bays but you have to buy the dry bay

modules like separately this includes

them like automatic so all of these

these these this whole Drive Bay here is

all just comes with the the thing and it

comes with two fans I think I think I

bought two more fans also to go along

with it separately

um so there&#39;s the fan back there and

then I think three fans right here

um

you know yeah I think it come with two

fans and then and then I added I think I

added two more fans

um it&#39;s not really important the the but

everything else just was from the Dell

so the power supply and even most of the

cables and and all of the the guts

and everything all that just came from

the Dell

um and then

um

you just plugged on my motherboard so I

got physical space for the drive right

so that solved that problem I needed

to add more SATA connections because I I

did the your typical motherboards only

have four maybe six SATA connections on

the the motherboard itself so that&#39;s

how many drives you can connect right so

I thought you know I went to Amazon I

didn&#39;t figure it would be too expensive

to buy these things so I bought one of

these inexpensive pcie the SATA

expansion cards

and this was a mistake

so this is the other thing that I

learned this this you&#39;ll find a

whole bunch of very these things are

like a couple dozen dollars or something

like on Amazon they&#39;re not super

expensive not even worth like they&#39;re

so inexpensive I I didn&#39;t even bother

returning it right right it&#39;s not even

worth that taking the time to do that

but this has like 10 SATA connections

on it right it was it was perfect for

this one I was like yeah we&#39;re gonna be

good to go but the way you&#39;ll know you

got the wrong one is you start your load

up you&#39;ll install true Nas or or you&#39;ll

set up your ZFS server or you&#39;ll be on

unrated or whatever and you&#39;ll have it

all up and running and then you&#39;ll

start moving files around and eventually

you&#39;ll get readers for one of your

drives and you&#39;re like okay well I got a

bad Drive goes out so I had that happen

to me and I went out and I bought

I had a drive go out and and I was

like okay all right well these are

really old so I guess I&#39;ll I guess

I&#39;ll go buy a new driver places so I

went ahead and um and bought ordered

two drops so I have one spare so I went

out bought that and before even a ride I

had another drop in

traffic this is this is really odd right

what&#39;s what&#39;s going on and I started

looking around I had at some point read

that you you you might want to get

something different or whatever for

whatever reason I had that in the back

of my mind that maybe this wasn&#39;t

working and that indeed was the case

this this is not what you want this

if you&#39;ve given read errors and stuff

after you started after you just

installed these things

um these El Cheapo things they they

can&#39;t handle the they&#39;re like for

whatever reason they&#39;re flaky they they

cause readers or writers or something

like that and they just don&#39;t work so

what you actually need is a thing called

a host bus adapter

and you&#39;ll you&#39;ll Google the SATA or SAS

hosts suggestions and particularly you

um when you when you&#39;re dealing with

unrated true now you&#39;re going to see

this LSI brand host bus adapters

and they they say you can buy new you

can buy them views Dell makes an

off-brand version of these things this

is LSI SAS

9 2

11-8i if you start googling around

you&#39;re going to find these this or

similar ones record of other it&#39;s

basically the same chip but it&#39;s it&#39;s

being rebranded like Dell has their own

is this card but they slap their name on

it and called it theirs

so this is what you need and what it is

is it&#39;s a SAS controller it has these

two connections on the back SAS

connectors and you get these breakout

cables that split off the the SAS

Connection in the setup so each one of

these there&#39;s two connectors and each

one of them can do four SATA

connections so you could you can control

eight drives just off of this one card

which is exactly what I need because I

can do all these eight drives and then I

have four ports on on the motherboard so

I could do these other two drives plus

the other two SSD drives that&#39;s on the

back of this machine which is all I

need for this machine so just this one

card they&#39;re not super duper expensive

um you&#39;ll see mention that you need to

flash these

um and

flash this into a different mode then

they come automatically I couldn&#39;t do

that with my machine is ancient and for

whatever reason the flash utility just

wouldn&#39;t flash this drive

um and so I wanted to work but it still

works it just means that I don&#39;t know

exactly what it does but it just means

that I have to intervene their boot up I

have to make sure it actually boots up

off of my drive instead of off of this

because this is a it has an integrated

RAID controller and you don&#39;t want to

use the ray controller you just want to

use it as a as an adapter

um

um

but you don&#39;t have to flash it to use

that way at least in unrayed and at

least in unrayed I um I don&#39;t think I

tried it in a true house the least and

unraved you don&#39;t need to it figures out

how to use this thing without a without

any issue so

um

yeah so this is what you need instead of

get this not this piece of or or

somewhere you start googling around

you these are going to come up these LSI

adapters

um thousand things of the case the the

adapter and let&#39;s make sure I&#39;m still

running nope

yes yes okay

sorry Maya oh

wait sorry it shut off on me last time

and and now it&#39;s not showing that we&#39;re

running but but we are I just

wanted to double check okay so the

yeah the case the adapter the other big

thing was what OS songs were running

like I was running Ubuntu

or you know you could run Ubuntu and

you could run ZFS on Ubuntu or any other

language distribution you could just

roll your own if you want it I wanted a

more out of the box solution that would

have like a nice management interface

that I could do over the web and

everything because I didn&#39;t want to have

to be like physically at the machine to

to mess around with it

um to like you know start Docker

containers or something I didn&#39;t always

have to SSH to be able to do anything

so I I just wanted a nice management

there are a couple Solutions there&#39;s as

I mentioned there is true Nas

which is based around ZFS which is a

kind of a a software raid solution

um that&#39;s like a fancy like Enterprise

grade whatever nonsense or whatever and

they have unraid true Nas slash

freenas is open source so you can run

completely free if you wanted to

um

or there was unraid and unraid does a

completely different thing they don&#39;t do

ZFS or anything they they

just stored data on individual just just

like you just put one file or one disk

you know there&#39;s striping or whatever

but they do have a concept of like

parody drives so it will track the data

on each Drive the parity information on

two up to two different drives

using two different methods so they&#39;re

independent each one can fail

independently and you still have safety

with the parity draws but it&#39;s a lot

it works out a lot more so the the the

the key thing is you probably you know I

thought I wanted to do true dots as a

Slicker in her face it&#39;s it&#39;s seems to

be

a H all the Nerds really like true

Nas or whatever so I was like I&#39;ll do

true that&#39;s why I&#39;m gonna do this proper

or whatever I&#39;m technically minded I

could handle the complexity and stuff

and that that was true I could get it

all running up and everything it was

when it wasn&#39;t a big deal but the thing

that I quickly run into is the way ZFS

arrays raids raid arrays work is

completely in Conflict the way

the home user needs to work the way ZFS

the way ZFS Works ideally is is that you

requisition a whole array at once and

then you never change it

the only time it changes when you go to

decommission it right if you need more

storage you make a new array so you buy

a whole new server or a whole new array

of disk and you add it to the server

and then that&#39;s how you upgrade storage

you can&#39;t just add one disk to the array

you can&#39;t just increase the size of a

disk on an array they there&#39;s no

resizing not not really if you want

to if you have like a five disk array

and you want it to increase the size of

each of the discs save going from one

terabyte drives to two terabyte drives

you need to upgrade every single drive

all five drives two two terabytes before

you get any additional capacity so you

basically gotta replace the whole thing

whole cloth which is insane I know like

I&#39;ve seen I think PRS whatever the where

they&#39;ve been discussing this for like

five years or something or other and

they still don&#39;t have this feature but

it doesn&#39;t make any sense that this is

not a feature but that&#39;s the key

limitations and for that reason pretty

much alone

I think it that that use case it makes

it

that&#39;s a that&#39;s a deal breaker because

that&#39;s not how home users work you get

one drive and then you add it and you

get another driver and then you add it

you get another driver then you add it

you know or one drop fails and then you

replace it with a higher capacity drive

and you got more drive space and you you

replace the old Hardware that&#39;s the kind

of use case piecemeal right at home use

guys and that is exactly how one rate

works there&#39;s really only one

limitation with unrated is that your

parity drives have to be equal to or

greater than the size of your greatest

um Data Drive so like I&#39;m in the

process of upgrading mine right now I

had a whole bunch of these terabyte

drives I had one drive fail this one

right here so I was like okay well

I&#39;ll go ahead and try this try

upgrading so I went and got on the

calculator and did the Google search and

everything and and found out that

um I can get four terabyte drive and

that was kind of the best bang for the

buck right now for at least for the

Western Digital drives that I found new

on Amazon at the time I went ahead and

got a four terabyte drive so in order

for me to do the upgrade since all of my

discs were one terabyte I had to replace

I had to replace both

both parity drives with four terabyte

drives and then I get to add a four

terabyte drive so I bought three drives

and that&#39;s that&#39;s one Data Drive and

two

um

in the two parity drops so I can upgrade

any of the from here on out I can

upgrade any of the additional drives to

two four terabytes well I haven&#39;t

upgrade the parity drives again so

um huge that was a huge huge upgrade

eventually

um and it went off Wi-Fi hitch I just

replaced the parity drive it rebuilt

and then I&#39;m in the other process of

replacing the other parity drive it is

in the process of rebuilding right now

and then after that I will add my my new

four terabyte dead drive plus the two

parity drives the two terabytes that

I had on parity drives I get that out of

them as it is that it draws now so I got

six terabyte from that upgrade six

terabytes out of 12 which isn&#39;t that

um

so yeah this is this the way this

works is

is fits the use case so much better

um so I would recommend that if you are

going to run a Home Server unrayed it

could do just about everything that you

need to do it&#39;s going to handle all your

storage you can run a whole bunch of

things a whole bunch of Network Services

like through Docker and everything

there&#39;s also virtual machines I haven&#39;t

used them but there&#39;s there&#39;s virtual

machine support has a nice relatively

easy to use interface I mean it&#39;s not

the snazziest one true NASA&#39;s introduce

interface is a lot Slicker but

underrated is just fine it&#39;s pretty

easy to use the learn learning curve is

not that much different from True Nas

actually

um so I would definitely recommend

unread it it costs money unlike the Free

Solution with with freenas but I think

the

it&#39;s well worth the money it&#39;s like

50 bucks for like the unlimited you

could do a free trial but there&#39;s like

50 it&#39;s like 50 bucks for like for

like unlimited drives or something like

that it&#39;s not it&#39;s I think it was less

than 100 books for and it&#39;s well worth

the money

um anyway DDD what else I have

to mention are we still rolling

yeah we are we&#39;ve been going for 20

minutes I could probably rack this up

so yeah that was the big thing is

the structural refined case is is a

great solution if you&#39;re looking for you

know moving up from you start with this

right start with your desktop you know

the old machine

use that as you know until you can get

do you need more like physical space or

whatever and then you know get you a

case or whatever and then if you if you

you&#39;re running a whole bunch more drives

now you&#39;re gonna need to get a SAS

control of the the host bus adapter

and then you&#39;re going to want to run

unrate most likely

um

anyway it&#39;s it&#39;s been a lot of fun

it&#39;s it&#39;s great taking you know homework

Network stuff so you want like run home

assistant or pie hole or or

whatever Plex Media servers all sorts

of stuff and plus I got a place to store

all my video files and all my backup

stuff and then eventually I&#39;m gonna

have this thing

um

backing up to like S3 for like cold

storage

Cold Storage backup like bulk Cold

Storage Becca the thing that that like

you know Azure and Google Drive and

stuff like that basically that they&#39;re

doing in the background for your stuff

and then I could turn off all of the

one drive and the I gotta lower my

iCloud account and you know I don&#39;t need

all that space anymore

um not saving a whole bunch of money I

have I mean it would take years to to

pay off the cost here but it&#39;s also you

know it&#39;s fun there&#39;s also peace of

mind or whatever kind of a little bit

like like I got my oh yeah yeah so

I thought like my my DVDs collections or

whatever I have

um I&#39;ve started like collecting DVDs now

you can get like the ripping the DVDs

and just store them on your server and

you can run like a home media server

without like so I don&#39;t have to worry

about where you know Star Trek the Next

Generation is this week is it on Netflix

is it on Amazon where is it you know I

don&#39;t have to worry about that I have my

own copy locally you know my legal copy

you know I have the DVDs I just have it

you know I don&#39;t have to I don&#39;t have to

have the DVD player so it&#39;s nice

um you do things like that plus I got

all my CDs and stuff like all my

all my music and everything I can put it

here because some of the stuff is

some of the stuff that I have isn&#39;t even

available like on Spotify or anything so

um that&#39;s great especially like the a

lot of the Japanese stuff that I have

from

my time in the Marines but like I

I couldn&#39;t I don&#39;t I would I can&#39;t even

type it in the keyboard to search it

like I can&#39;t speak Japanese so I can&#39;t

even like type it in to find the music

right but I got the CD yeah anyway

um anyway it&#39;s just a lot of fun and I

hope you guys found it helpful and

and yeah I I will see you guys

on the next one bye
