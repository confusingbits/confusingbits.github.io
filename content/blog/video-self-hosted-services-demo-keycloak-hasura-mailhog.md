---
type: blog
author: Corey Thompson
title: >
  Self-hosted Services Demo - Keycloak, Hasura, Mailhog
description: >
  
image: images/video-self-hosted-services-demo-keycloak-hasura-mailhog.jpg
published: "2023-03-01"
video: https://www.youtube.com/watch?v=VzwVM1xQ_b4
---
### This transcript was automatically generated by YouTube, so there may (will) be some (many) errors.

all right so let me try to do this

one take

so

um

yeah there&#39;s been a lot of some

interest to expressed in a couple of

things that I&#39;ve been looking into the

last couple years namely

authorization like Autobox solutions for

authorization and hasura which I love

I have a lot of experience with hasura I

don&#39;t have so much experience with

key cloak but we&#39;re going to start

with keycode to just to get it off

the

get off get it off our plate and

we&#39;ll spend most of our time on on um

but geek Coke is so you can just run it

yourself so I have this project here

this is my like

all the all the little toys projects

so anytime I get a little itch to play

around with a new technology I just

added to this repo and I&#39;ve been adding

like

kubernetes stuff and why but we&#39;re not

gonna do the kubernetes stuff I just

have a little darker compose and darker

compose up and it runs all of these

things so we got an X application

postgres key cloak has Surah and

mail hog and we&#39;ll get to mail hog later

but basically it catches all your SMTP

traffic

um I&#39;m not sure if we&#39;re going to demo

that but

stay focused Corey

um

so yeah here&#39;s the the next

application right here it&#39;s just a

little example application

um and it is running where&#39;s it right

here so it has this this keycode

provider that&#39;s just the library and

you give it a config and you set it

up and it&#39;s a provider you know this is

all box center react stuff

um don&#39;t normally use key cloak specific

provider normally what I would do is

something like

next auth but I played around with

it for a little while whatever reason I

couldn&#39;t get next to I couldn&#39;t get

keyclock to work with next off even

though they have a they have a router

provider for it

but for whatever reason I

I couldn&#39;t get it working but I&#39;m

sure it&#39;s something dumb but anyway

so let&#39;s go through setting that up so

that&#39;s the next next application we also

have the

other application which is key Coke

and it&#39;s right here so keycloak is just

it&#39;s just it&#39;s just a it&#39;s like a job

application I think or something is is

huge

um it does like

Federation and everything I don&#39;t

know what is my password

it&#39;s just password of course it is all

right

um yeah this is all local stuff so

nothing&#39;s secure okay so Key Club has

this concept of Realm so you can have

different rounds for each different

client so to speak I mean like client

Clank like business client like you

know ASCA or I don&#39;t know e-tracks or

something we could have a different

realm for each one of those and within

each round you could have a different

client set up for

um set up for different applications

so maybe you have different

authorizations that you want to allow

specifically for a specific client like

you want your you know there&#39;s some kind

of asp.net application that has a client

and then you have a react it has its own

clients and you don&#39;t want to share the

two for some reason

but it starts out you just have a

master realm again I&#39;m not a huge expert

on here but Master ROM is basically

like the the admin realm um it comes by

default and you can add so if we

wanted to create a you can create it&#39;s

it&#39;s a ram in itself so you can create

clients for it and everything but like

if you want to add users just the admin

user if you want to add I don&#39;t

know someone who wants to be able you

want to allow to be a minister you would

add it to a user to this one this user

only exists this admin user and any

users that you add in here only exist in

the master realm so it&#39;s it&#39;s separated

right there&#39;s a word for that I can&#39;t

remember the name of it but it&#39;s a fancy

word and and we&#39;re not gonna remember

it so we&#39;re gonna move on you have

groups and it does all the fancies this

this just like setting settings for days

here like

this this is a feature complete like

thing but

um

like I said I don&#39;t know a whole lot

about key clock let&#39;s just get to

setting it up so we can just authorize

for

um for this next AES application so we

need to configure a round for for it

to do that we need to I don&#39;t know if

the resource file does but we&#39;re going

to do

we&#39;re just going to call this text

realm and enabled and

and now it has been created successfully

um and we go here to clients and we see

all of these default ones I don&#39;t know

what they do but we need to go here and

create one we&#39;ll create

we&#39;ll call it next client

ID

and names optional description we don&#39;t

need to know that and do we need

don&#39;t think so

don&#39;t think so all right so that

should be saved

and

you get the root draws a valid redirect

URLs but I think

we&#39;re good to configure so this round

should match match the the round name

which is next round and the client ID

that we&#39;re trying to use to match the

client ID over here so that&#39;s the next

client ID that&#39;s why I named them that

because we already had it configured

here

okay so that should be

good this is not going to work

no it&#39;s not gonna work

of course that&#39;s not gonna work what did

I do do I need to redirect you all

right let&#39;s let&#39;s start

we&#39;ll find out

all right look at there and we can&#39;t

wait I think we actually

can I I don&#39;t think I have naked yeah

it&#39;s admin doesn&#39;t exist in the throne

so this password okay yeah okay

um so that&#39;s that

let&#39;s go here and let&#39;s just create a

user for this round real quick

let&#39;s call it

[Music]

password oh

where&#39;s my password all right do I get

to prepare the password

I don&#39;t

oh okay let&#39;s try

worry

nope honey where do you get the password

from I can create the usual

credentials set password okay that looks

good

I just want to go through all this just

so we&#39;re complete

it&#39;s just so we can set it all the way

yeah yeah

and so I didn&#39;t build these screens at

all

um those those those those screens that

are popping up that is

completely on I don&#39;t know why it&#39;s

saying I&#39;m not logged in

um

hold on

I&#39;ve got a profile

whatever okay so so we we logged in

there&#39;s some other stuff going on but

all of that stuff exists on the key

cloak side and they&#39;re actually

configured like the the look and feel so

you can do like a headless version where

you&#39;re just interacting via API or you

could do like templates for each one of

these screens if you if you really

needed to

to

to set it and that might be one reason

why you would have a different client

set up for a different application

because maybe it&#39;s using a different

style guide for this application than

another right I even want it to be too

jarring

um maybe that&#39;s one reason for it but I

forget it&#39;s around here somewhere you

can configure these these Pages

using like a template scheme I think

it&#39;s kind of like handlebars or

something anyway

whatever this is key clock

um

and so you could just run one instance

and as you can see it&#39;s it&#39;s running

on Docker here it&#39;s not a huge it&#39;s

not a huge memory hog

um I run it locally like I mentioned it

earlier I was running on a Raspberry Pi

cluster I mean it&#39;s not a big deal

um so that&#39;s key cloak

um the big one I wanted to talk about

was hesera because

um

I want to be clear with key cloak we

could deploy one instance and and manage

multiple clients multiple deployments

for for clients

and I think it even does like what&#39;s the

word Federation or something is where

you you you do ldap and active directory

and stuff you can connect that up and

stuff it&#39;s like

it&#39;s pretty pretty pretty snazzy from

what I can get yeah user Federation you

can add ldap providers

identity requires okay so we saw the

little login page I know we&#39;ll say we&#39;re

moving on the Hester

um but you can add configurations for

each one so that was user ID and

password right authentication but you

could set up right here GitHub

authentication or Microsoft or Lincoln

whatever provider that you want it to do

social

you can figure here it&#39;s going to show

up on that page after you configure it

because that&#39;s being provided by Key

Club right and we don&#39;t have to write

any code to do that we just click some

stuff in here on the dashboard and it

works

um

I think you gotta configure the

cigarettes and stuff though right call

back and redirect URLs and stuff like

that on the you know like Google

dashboard or whatever

but not a big deal

um yeah moving on moving on um

this is the thing that really saves the

time though I mean

um there&#39;s one thing to not be

re-implementing authorization

but being able to do so cheaply

it&#39;s another thing we always do is we&#39;re

always writing apis apis for days and

there&#39;s almost zero reason to write them

nowadays in my personal opinion is you

you you have something like her surprise

or isn&#39;t only one it&#39;s probably the most

feature complete that I know of but you

basically have Hesser or you just run it

again it&#39;s just a Docker container it&#39;s

open source they have a community

version they of course they have a a SAS

version as well if you want to to do

that as well but you could just run it

on your own it&#39;s just a Docker container

and

um

what it is is you just point it at your

database you start tracking tables or

adding tables or what deleting tables

and it basically starts managing your

database for you you can do migrations

and and it could track yeah it

could track schema changes and all that

all that jazz for you at the same time

it&#39;s doing that whenever you track it it

also gets added to its graphql it

automatically gets exposed as a graphql

API so let&#39;s just do that right quick

and we&#39;ll do a couple examples I&#39;ll show

relationships and all this other stuff

so let&#39;s just do let&#39;s just connector

database which is right here in front of

my face things look different because

I&#39;ve only got half the page to work with

um but okay so we&#39;ll go we&#39;ll just

call this DB

um database URL has come from an

environment variable my environment

variable is in here

what is it what is it

yep

that&#39;s it

and I think there&#39;s a one that it

automatically picks up I can&#39;t remember

though I can&#39;t remember what it is okay

so we did so we set a database name and

that and okay so we added the database

and there&#39;s nothing in this database is

it&#39;s brand new um

running and

and docker

what is it okay so it&#39;s got it oh yeah

yeah okay all right so I&#39;m using the

same database for

Key Club right

so we could see a bunch of key cloak

tables and stuff

so if I had a difference

I&#39;m not going to do it because it

doesn&#39;t matter but I could set up it

like a different database or a different

schema to to handle this separately but

let&#39;s just let&#39;s just say that we want

to add a new table so this is like on

track tables it it looks at your

database says okay here&#39;s all the tables

what are we not tracking do you want to

track them if you don&#39;t track them then

you know it&#39;s not going to show up in

the API

but we can create a table and we&#39;ll

call this table name will be

um

our users or something his user is taken

we&#39;re going to find out

um it&#39;ll be it will have an ID

integer I&#39;ll recommend

New York

it is not knowledgeable it is unique

actually let&#39;s do this here

we can do it&#39;s got some

pre-created one so we can do energy

energy big ants

ant generated by default around you

whatever we can create that I IIT a

user ID and we&#39;ll say there&#39;s a name

and yeah

okay I don&#39;t know what it&#39;s not saying

it&#39;s Unique

um and then you could set a primary key

if you wanted to you can add a foreign

key if there was a foreign key unique

Keys we just added that right here

right here see we had it down here at a

unique key

let me do that

okay whatever

you can do check constraints and

everything let&#39;s just add the tables

invalid type

four column name

oh I didn&#39;t I had a name so name is text

okay so we got a table and it does

give you a view of the table so you

don&#39;t have to pull out your database

client you can just see the the see it

in here you can insert a row you

could manage relationships and manage

the permission so let&#39;s let&#39;s just let&#39;s

just add

a API let&#39;s see there you have a

sensor row um

Corey probably the first user

receiver is core if we&#39;d see it it&#39;s

it&#39;s just added right here

I can go in here and click to edit the

row and save and and all that jazz no

filter modified

okay but I mean that&#39;s all fine and

good but you see here when we go back to

the graphql API we already have

some queries that are already we have a

user&#39;s query

we have a user&#39;s aggregation query so

where you can do like counts and

statistics and and stuff like that the

the the really nasty SQL statements

that&#39;s what you do with aggregates

user by primary key so and

they can choose which Fields you want to

go in here and you can type in here as

well you know it has autocomplete so you

can just do name

um you can do type name that&#39;ll come out

so we just have one user

and it&#39;s going to come back with

Corey and a type 9 user if you want that

information this could be kind of useful

if you&#39;re wanting to do some like

run time

I think it&#39;s useful for like caching

especially so like if you have

Apollo as your client or whatever it I&#39;m

pretty sure it uses this type name like

by default

to figure out what type of which cache

it&#39;s supposed to go in and then of

course it uses ID

to to update the field so it handles the

cache updating

via the type name and the ID

think something to that effect handles

it automatically for you

so that&#39;s the other half of this is once

you&#39;ve got once you&#39;ve got hasser and

it&#39;s making your API for you well now

you don&#39;t have to spend a whole bunch of

time with your client you can just do

something like Apollo and you&#39;re just

writing graphql queries and it handles

all the caching and the pagination and

all of that nasty stuff

that you would normally have to manually

code up or painstakingly coat up on the

front end it handles a lot of that for

you so you don&#39;t have to do so so a lot

of times in particular with react

applications they&#39;ll have Redux will be

used as a cache like an in-memory cache

so you&#39;ll do a request and you&#39;ll cache

it into into the Redux store and then

you you&#39;re updating or deleting entries

from the store as you&#39;re making API

requests so it&#39;s like your your local

cash or whatever but there are clients

now that handle that caching for you

automatically you don&#39;t have to

explicitly write reducers to to to

handle handle those you know to

handle that State Management

yep

okay so this is this is our final well

um I mean asp.net you can you can

just scaffold a controller right and it

it handles all that for you but the

power it comes from when you start

adding relationships so let&#39;s do I don&#39;t

know posts table name posts because

we&#39;re going to do a Blog here

and the column is going to be integer

okay yeah whatever

and then I call the content

and it&#39;ll be texts and it will be the

abuser body

which will be an integer

and it will not be Noble and

that&#39;s an unique and anyway you can

spend a lot more time on this okay so

I&#39;m going to add that

um notice it&#39;s adding indexes for me and

stuff like that as well

um and I think if we go back to public

so sometimes it can detect like if

there&#39;s a foreign key relationship or

something like that

it&#39;s not picking it up for some reason

right now but

there is a foreign key relationship here

um

this relationship here

relationship type is an object

relationship

I think

let&#39;s see here

first table

I gotta put here

I&#39;m just gonna put a name

user

and reference

to users from

call ID to

what

I&#39;m on the right table I&#39;m on users

table I&#39;m on the wrong table that&#39;s why

I gotta post

sometimes it&#39;ll do sense I don&#39;t know

why it&#39;s not doing a hint

did I do it right yeah sure

okay whatever how&#39;s that relationship

user this is the name it&#39;s going to be I

believe this is the name it&#39;s going to

show up in the the schema so you&#39;ll do

like user and then you can get the

interior user information from

the relationship I&#39;ll show you in just a

second

yeah this goes to users and this

is from user ID to

and I believe that&#39;s saved yeah so post

audio user ID to users.id

okay

and we don&#39;t have any data yet so let&#39;s

insert row let&#39;s do

hello inventive

and let&#39;s do

user ID of course one because it&#39;s

the only user we have and we&#39;ll click

that

and let&#39;s go back to the APR all right

now

uh

I need a user I need posts

posts and then I want the user

and ID

see we&#39;re filling out the related

information we&#39;re not just getting user

ID I do have user ID here if I wanted it

you know like just by itself but because

we have that that relationship to find

it&#39;s kind of like navigation process

properties and Entity framework you just

dot your way to Glory

um

very similar thing

and this is where that by the way yeah

this is where that type stuff comes for

so as you have nested objects in here in

your query having the type name in the

query

allows it to normalize the data right in

its cache

that&#39;s working it didn&#39;t really make

sense if you&#39;re pulling a single one you

know what you&#39;re you&#39;re pulling but

but this that makes it explicit what

what type is you know what what type is

being related here

but yeah you could see here we you&#39;re

automatically you&#39;ve got relationships

you do aggregation I do it do I can I

do an aggregation now

aggregations are

yeah but I mean this is still

uh

if I can remember how to do

where

content

I can&#39;t remember

this it&#39;s been so long since I&#39;ve

written this

is equal to

well this is not going to come up with

anything but it&#39;ll

it&#39;ll

am I missing now

validation for a missing selection

set for post

hello

I remember doing

there&#39;s a like in here somewhere I think

all right

oh something

whatever I can&#39;t remember how to do

where he&#39;s off the top of my head it&#39;s

been it&#39;s been a bit since I did

graphql on the syntaxis

it&#39;s not bad Missing selection set

for post aggregate oh that&#39;s that&#39;s why

I was complaining

because we were messing around there and

is that why I was complaining yeah yeah

okay so you know I pulled up and then

this should come up with nothing because

there&#39;s no Foo right

and yeah

so that house app

and it has had no security the way it

handles is security so right now we have

an admin secret set and we see it here

on the request headers has an admin

secret set that you set whenever you

create the Hesser instance

um but you don&#39;t send that open that&#39;s a

that&#39;s it at best that&#39;s something that

you send maybe from a back-end service

to hassera but you know you wouldn&#39;t put

that on your client or whatever but it

does have

um

um you have a Json web token and has a

shared secret with the general Chase on

Moto and what that kind of looks like

when you deploy and Things Are is you&#39;ll

have like a a JWT secret and it&#39;ll have

some you know some Secret in there and

that&#39;s what I&#39;ll use to validate

any Json web token that you have a

bearer token that you you send to hesera

and and then you can do let me can I

do

foreign

so there&#39;s like usually maybe because

I have that set

there&#39;s a little thing that like a

little person icon that shows up and you

click on it and you can actually see so

if you get a Json to web token

um that you&#39;re you&#39;re wanting to use

with your application you come in here

and you paste it in here and you can

click on it and then you can see the

information that&#39;s actually in the token

but that&#39;s a central feature to show off

right now notice whenever I don&#39;t have

the secret like nothing&#39;s available

right

you can&#39;t see anything in the

but um

might of course one of you to have a

secret or you have the right token

with the right access you can see see

what&#39;s available and so that brings us

to security

so you can go here to users and if we

want it to so this is the user run

usually this would be like users or

profiles or something most of the time

you don&#39;t want your users to be able to

you want to be able to query for their

user but you don&#39;t want to query for

every user and

maybe you want to set permissions on

there so this is admin role but if we

have I don&#39;t know

a user&#39;s role

and you can go in here and you can

select and we want to select with if I

can remember how this works

with custom check

so if we wanted to do

call

call no no no no not real select is it

real select

all right

I got a root-filled professions called

permissions

okay to be clear this would be

like your ex hessera

this this would be like in your your

Json web token would have a role here

and it&#39;s

it&#39;s part of the Roll field that&#39;ll

allow it tells it which which one it

could be so but we&#39;re going to do and

that we&#39;re going to set it up like

there&#39;s a x Hesser a user ID in there

and so X ID

is equal to

um the usual name and Convention is

hasira X hassera would do that and then

like user ID and then that&#39;s the value

whatever value is in there so if I have

a Json web token with one it&#39;s going to

do a query basically where it says

give me all users reflect star where

where where ID is equal to

to one basically

and so if I did a query without with

just user permissions

with this set you&#39;re just going to get

one row you&#39;re just going to get the

whatever row equates to your single

users so that&#39;s how you can do row level

permissions you can also do column level

permissions

um

yeah

that&#39;s that the green the green check

mark means full permissions everything&#39;s

wide open red means everything&#39;s closed

off and then

the filter means there&#39;s some sub

selection between those two

so most things will probably be you know

filters and stuff we won&#39;t do the rest

of them I think you guys get kind of get

the point that you can do permissions

enough fairly easy way here

and what else

what else what else what&#39;s okay so the

other thing so there&#39;s actions as well

so sometimes

you want to do things you want side

effects so this is all like pure right

well pure in the sense that everything

goes directly to the database there&#39;s

there&#39;s nothing else happening on the

side this is all pure either query to

the database or writing to the database

or reading for either reading or writing

from the database right that&#39;s all

that&#39;s going on right here except for

some login of course that&#39;s on the side

but there&#39;s no like side effects so to

speak

but you know most of the interesting

things we want to do are actually side

effects so let&#39;s say you want to send an

email after the user updates its email

address yeah that would normally just

be you know mutation on the graphql API

by the way all the mutations are defined

too so if I do mutation

and then updates you know how I

already have populated updates users

update post you mini primary key

there&#39;s also upsert

yeah you have insert I think there&#39;s one

I can&#39;t remember you have deletes I

think there&#39;s an upsert I think one of

the

I think update is an I think insert is

just an insert I think update

is actually an upsert if I&#39;m remembering

correctly one of these is an upsard I

can&#39;t remember which one it was but

anyway so so you had the mutations out

of the box too so normally all of this

stuff that I mentioned here even if you

wanted to do graphql this is not just

graphql magic here it is magical but

graphql doesn&#39;t normally do it so you

normally have to write all of these

mutations you have to write all these

screws you have to write all the

resolvers and all of this stuff here but

all of that is being created for us just

the same way as if we you know had Auto

generated a

scaffolded in API in asp.net or

something like that but way way more

powerful

all right

what were we doing Towers mutations

okay so sometimes you want to send an

action off to the side after you set

after you update after you update the

users you want to do some kind of action

of sizing create an action we&#39;ll say

here

send fair if

notification email

yeah my spelling sucks

um

so

um

this is a little bit different since the

last time I looked at it so give me a

second

okay it&#39;s it&#39;s doing some type

generation okay so what you would do is

you basically give it a name

and then you give it some web hook or

whatever

um

that you are so maybe you have like a

node servers on the side and that&#39;s all

it does is it handles these triggers and

it&#39;s like it&#39;s on little micro services

for these triggers and so

um

so yeah

there&#39;s also headers and stuff yeah

this is like new configure more things

like if you had to provide a secret key

to be able to call the ape this this

endpoint that you you needed oh but yeah

you create the action and you have the

action name right here

um

and

I remember

uh

I can&#39;t remember

I&#39;m getting a little fuzzy on this guys

but

um

let&#39;s give a

yeah

yeah you should have a you&#39;ll have like

some route for that you&#39;ll you&#39;ll you&#39;ll

switch off of the the way we normally

did it at my own company is we would

have this jot switch statement that

would just dispatch to all of it so it

would get we&#39;ve had this one endpoint

that was for all of our actions and then

that would be all the action names we

would just switch on the action name and

I think it was actually in the input

body and so the input body after you do

this so let&#39;s

you&#39;re supposed to be able to associate

this to a specific table

am I misremembering I know this

I know this works off of table updates

so you could say if a table got updated

or a table got to the row got updated or

row got deleted

I have

maybe it&#39;s maybe I&#39;m thinking of events

ah yeah yeah okay so I actually actually

now that I think about it I don&#39;t think

I&#39;ve really used actions

what were accents I&#39;m sure I&#39;ve used

them before but anyway so you have

events as well the events is is you

have so

I don&#39;t know what actions are for

what does it say

let&#39;s go back

actually it&#39;s actually a custom query

should be there oh yeah yeah yeah

okay

okay

yeah yeah so if you need to to offload

something so you still have it exposed

through

the Hesser API maybe you have this

this this specific endpoint that you

want to dispose through this API you&#39;re

going to dispose it through through

an action

um

yeah validation and recent Transit okay

yeah this is one of the

the

whatever you call it the the outlets for

things that it can&#39;t handle it it gives

you an outlet and the other one is event

triggers event triggers they trigger

off of

update you know

um

let me use that little database and then

public and users and then whenever they

update their

on their update it&#39;s going to send to

some some endpoints

um

http

3000 we&#39;ll just do that

summon point and what it&#39;s going to

include is going to include

yeah I remember in this now it&#39;s going

to include the event name so the the

name here

and it&#39;s gonna I believe it&#39;s gonna

have the operation that triggered it

and it&#39;s also going to have

the

um

it&#39;s listed for updates it&#39;s going to

have the before update and after update

um

I think even delete yeah insert update

and delete

um so it&#39;s when I yeah it&#39;s going to

have all those things it&#39;s all going to

be in an object and it&#39;s going to have

all the information you need to detect

what type of change happen with this

event and then you know do whatever it

is that you need to do so like you look

and see if the if the the old and the

new email address are not the same then

send then send the the email

verification email right and and save

the verification code to the the user&#39;s

the users table you know you can do

that on the side

um after it triggered so yeah that&#39;s

that&#39;s triggers and of course there&#39;s

Crown triggers as well you can call

things on the schedule and then you can

do things on events and there&#39;s also

where am I see that

you can also do

um

just raw I don&#39;t see it here anymore

maybe they don&#39;t allow it anymore

there&#39;s usually just a raw

um

SQL

thing maybe it&#39;s because they&#39;re they&#39;re

not using

they&#39;re not explicitly SQL now so

whenever this first came out it was

built almost completely off of postgres

right

um

and then they added support for

SQL Server Microsoft Secrets SQL Server

um and that too that was long and

painful I was I was with a another

client and they really liked this idea

but the SQL Server adoption

was the SQL server

was announced as being is going like

into beta and that they had a release

date and everything so we decided okay

we&#39;re going to take a risk and get it

done

and and they said that it was going

to be it was going to be done by certain

dates anyway

they didn&#39;t have complete

SQL server support so like you could do

get queries and stuff like that but you

couldn&#39;t do any mutations it was a

nightmare but after we had already

got it you know they said we&#39;re going to

support SQL server and then they they

announced that they support SQL server

but but we don&#39;t support mutations so

like you don&#39;t support SQL server but

anyway

um that was a whole Revo it&#39;s if you&#39;re

using postgres it&#39;s it&#39;s I know it&#39;s

fully feature complete I imagine

the

SQL Server is the implementation is

mostly complete now

although

as an aside I don&#39;t know why you would

use Microsoft SQL Server unless you know

the client was dictating that you had to

use it because

you&#39;re just choosing

for the client to have to pay money out

of pocket for SQL Server when you can

just get the free option postgres which

is just as good but anyway

um

yes I miss her anything else that I

needed to cover with this

there are probably

okay let&#39;s just wrap up here

I I&#39;m sure you could walk on it what you

know you made it this far and I&#39;m like

what is the the

the the the the

takeaway or whatever because you always

watch demos and everything looks all

hunky-dory

um

and and then we start working with it

it&#39;s not so not so nice right there

there&#39;s some some sharp points and

you know rough edges and all that jazz

um

but this is truly awesome I&#39;ve used it

s own

I know for sure too fairly significantly

sized applications and I&#39;m pretty sure

it may be three or four

I can&#39;t remember if those actually got

launched or not but it&#39;s between two and

four projects over a span of about two

to three years so I was pretty early on

board with the hassura train so it&#39;s

it&#39;s really nice

um

I I kind of mentioned that I hadn&#39;t done

a tremendous amount of API development

before I came to inventive

and um

for like the last couple years maybe the

last two or three years

and it&#39;s all because we were using has

hero

because once you start using this

there&#39;s really no reason to go back you

combine this with with Apollo and

next.js you have server side rendering

client side rendering you have easy

easy schema Management on your

database oh by the way that&#39;s another

thing too so all of this is tracked with

this like metadata stuff I&#39;m not doing

it here but there&#39;s like this other

little command line thing that you do to

to generate so this isn&#39;t all just lives

in the instance it&#39;s you can actually X

you can actually manage this as code so

this is what happens whenever you export

the data data the metadata and it it

tracks the data so this is metadata this

is it&#39;s it&#39;s saying this hat this

handles what it&#39;s tracking and how it&#39;s

config how the tracking is configured

and then you have the migrations which

handles your usual up down migration

stuff and it also um a plaza so you can

have a container so like the workflow

would be as a developer your local

developments and you have the the

hessero CLI pointed at Hesser instance

that you have locally and then you make

a change to the schema or whatever that

you you want to track

that gets saved to repo I gets committed

in in your you know you&#39;re part of your

future development gets committed as

part of your PR

and

um

and it gets reviewed accordingly and

then of course whenever it comes time to

go into Dev or staging or whatever

there&#39;s there&#39;s a container of

hessera that will automatically so

you&#39;ll get that container when it starts

up it&#39;s going to look at its metadata

and if it has any unapplied metadata or

any unapplied changes it will go ahead

and apply that automatically

um

yeah and so that&#39;s how you so it is

managed actually managed to encode and

managed and it&#39;s reproducible you don&#39;t

it but if you do make changes without

that tracking enabled or whatever so you

can play around with things but it&#39;s

it&#39;ll it only exists locally you gotta

set it you got to set the tracking and

it&#39;ll only be tracked locally in this

instance you&#39;ve got to do the the CLI to

to do the the tracking

console and and make the changes there

and then it updates the metadata and

then you commit that and everything it&#39;s

code at that point

um

it&#39;s pretty good I will say there are a

couple of rough edges

um

it is I think difficult for for some

people to get used to

you know triggering off of events you

know because people are used to just

mucking around in the controllers right

like I need to send an email let&#39;s just

put it right here you know

um never heard of dependency management

you like if they&#39;re if you&#39;re really

optimistic they&#39;ve heard of dependency

management they&#39;re going to use the

email service right but you know we&#39;ve

all seen it right you just you get it

done and and you&#39;re gonna you&#39;re gonna

you know do the the email client dot

send right in the middle of the

controller and and you know make

everybody&#39;s life a living hell for

trying to test it

but anyway

so there&#39;s a I think if you&#39;re not used

to if you&#39;re not one if you&#39;re not used

to graphql if you&#39;ve never used graphql

there&#39;s a little bit of learning

learning curve there it&#39;s not terrible I

I can&#39;t say I dedicated time

specifically to learning graphql I just

picked it up on the fly but and

there&#39;s another I said this is a

particular flavor of of graphql that

it&#39;s very regular since all of this is

basically generated right it&#39;s got its

name Escape so it may not be a style of

graphql that you&#39;re actually familiar

with I don&#39;t know I&#39;ve seen some pretty

nasty graphql apis and this one&#39;s pretty

regular it&#39;s pretty consistent but if

you&#39;re you know if you have a very

particular concern about what your

graphql API should look like then that&#39;s

that that is one concern oh another

little thing you can actually do let&#39;s

do

query post you can analyze right here

and you can see the actual

um

generated SQL

and it it caches these this generated

SQL and stuff like that for you these

execution plans and all that stuff for

you and I think it even

does some measure of caching

um

I think it does some measure of request

caching but I can&#39;t say I I&#39;m I don&#39;t

know that for sure but I think it does

it&#39;s just it&#39;s just it&#39;s almost always

unless you get some just really nasty

because this is I mean we do if if

you have a recursive thing you can you

drill down forever there&#39;s no limit to

how far you can go in there there is

a limit on oh yeah yeah there is one

other limitation and I think this is a

graphql limitation so you do get

subscriptions out of the box that is

another thing it&#39;s this is amazing about

this you can just reduce descriptions

you&#39;d have to write any websockets or

nothing like that you just do us this is

just this just works

you know you just write a a graphql

statement you add subscription here and

suddenly it&#39;s a subscription

um

but

uh

if you do this it can only have one root

so if I try to do users if I want to

pull users as part of the subscription

as well

yeah

that is one limitation and as far as I

know that&#39;s a limitation of

a graphql itself I think that&#39;s part of

the spec but anyway that&#39;s that&#39;s one

of the little things that I&#39;ve run into

over the years

what else is

difficult

um

this isn&#39;t a complete that that&#39;s

another thing it&#39;s not a complete

solution for API it handles like eighty

percent of what you want to do but again

you&#39;re going to need another service off

to the side a little side car service

that&#39;s handling these events and these

actions and stuff like that

um

but it&#39;s not a pain at all it&#39;s just

I&#39;ve I would much prefer to do this I

could do this Rush my career I love it

but anyway

um

all right if you stuck around it&#39;s

nearly an hour in I don&#39;t know

I I hope you guys found this this oh

yeah yeah here&#39;s the other thing I

forgot to show this

there&#39;s also another little thing so

you could

another big pillar of like the

self-hosted thing is that we wanted

authentication we needed you know

some way to easily build out apis manage

them a lot easier and manage the

database that does that all in one with

Hesser but also you need to send out

emails but the problem with emails is

usually you know you&#39;re using same grid

I don&#39;t know about you I can&#39;t stand

send Grid it&#39;s too heavyweight it

doesn&#39;t work correctly you know half the

time that it doesn&#39;t oh your emails are

being blocked we can&#39;t do nothing you

got to buy a dedicated IP and and you

know whatever but but we could just

we just send SMTP we have a you know we

have a connection to some SMTP service

we could just connect it to that from

our code and then we&#39;ll have to do some

deep integration with sendgrid or

another email provider or SES or

something like that we created our own

templates we we send them SMTP

like you know like a good boy

and and for that we have mail hog off to

the side so we can use that in

development to

I I could set this up to to like verify

the users from

key cloak and have it send an email to

this this this mail hog but like in

development you could point it at mail

hog instead

of a real smtv service is it not going

to work

it&#39;s not gonna work

okay

please work okay so basically this is a

fake inbox right everything that gets

sent to this this

the server just goes into inbox and it

just lists all the emails here so you

could easily test in development you

don&#39;t have to be calling out to SES or

or

um

or same Grid or whatever else you just

have smt TP connection and it&#39;s pointed

at this in development and it makes it a

whole lot easier to you know you don&#39;t

have to worry about delivery issues or

nothing like that especially in

development it&#39;s a lot quicker and again

it&#39;s just running as this is a little

sidecar development thing

um by the way guys I don&#39;t know about

you I set up a Docker compose upon every

project that I do as much as possible

I&#39;ll try to get everything running with

a single Docker compose command

like I could just like we&#39;re done with

the talk now so I can just do darker

compose down and

everything is going to get stopped

and I am cleaned up for that project for

the day you can see I have aska and mass

HVAC

still going well they&#39;re turned off

right now as well so you know it&#39;s the

same deal I&#39;m like and then if you want

to get going again it&#39;s darker compose

up by Steve

you combine this with like the dev comp

containers with what&#39;s this

the

you can find this like a a Dev container

um

where you open up the editor and it

automatically starts everything up in a

development container with all the

dependencies

I think that&#39;s let&#39;s get into where

things are pretty nice

I don&#39;t know why it&#39;s not let me

there we go okay yeah see now we&#39;re back

up

so it&#39;s just

it&#39;s a lot easier you know you know

anyway

um

let me know what you guys think and

you guys have a good day
